<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="latexinput" content="mmd-tufte-handout-header"/>
	<title>Syntax</title>
	<meta name="author" content="Fletcher T. Penney"/>
	<meta name="version" content="4.7.1"/>
	<meta name="revised" content="2015-02-20"/>
	<link type="text/css" rel="stylesheet" href="http://fletcher.github.io/MultiMarkdown-4/css/document.css"/>
<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
	<meta name="latexmode" content="memoir"/>
	<meta name="latexinput" content="mmd-tufte-handout-begin-doc"/>
	<meta name="latexfooter" content="mmd-tufte-footer"/>
</head>
<body>

<h2 id="syntax">Syntax</h2>

<h3 id="metadata">Metadata</h3>

<p>It is possible to include special metadata at the top of a MultiMarkdown
document, such as title, author, etc. This information can then be used to
control how MultiMarkdown processes the document, or can be used in certain
output formats in special ways. For example:</p>

<pre><code>Title:    A Sample MultiMarkdown Document  
Author:   Fletcher T. Penney  
Date:     February 9, 2011  
Comment:  This is a comment intended to demonstrate  
          metadata that spans multiple lines, yet  
          is treated as a single value.  
CSS:      http://example.com/standard.css
</code></pre>

<p>The syntax for including metadata is simple.</p>

<ul>
<li><p>The metadata must begin at the very top of the document - no blank lines can precede it. There can optionally be a <code>---</code> on the line before and after the metadata. The line after the metadata can also be <code>...</code>. This is to provide better compatibility with <a href="http://www.yaml.org/">YAML</a>, though MultiMarkdown doesn&#8217;t support all YAML metadata.</p></li>
<li><p>Metadata consists of the two parts - the <code>key</code> and the <code>value</code></p></li>
<li><p>The metadata key must begin at the beginning of the line. It must start with
 an ASCII letter or a number, then the following characters can consist of ASCII letters, numbers, spaces, hyphens, or underscore characters.</p></li>
<li><p>The end of the metadata key is specified with a colon (&#8216;:&#8217;)</p></li>
<li><p>After the colon comes the metadata value, which can consist of pretty much
 any characters (including new lines). To keep multiline metadata values from
 being confused with additional metadata, I recommend indenting each new line
 of metadata. If your metadata value includes a colon, it <em>must</em> be indented
 to keep it from being treated as a new key-value pair.</p></li>
<li><p>While not required, I recommend using two spaces at the end of each line of
 metadata. This will improve the appearance of the metadata section if your
 document is processed by Markdown instead of MultiMarkdown.</p></li>
<li><p>Metadata keys are case insensitive and stripped of all spaces during
 processing. This means that <code>Base Header Level</code>, <code>base headerlevel</code>, and
 <code>baseheaderlevel</code> are all the same.</p></li>
<li><p>Metadata is processed as plain text, so it should <em>not</em> include
 MultiMarkdown markup. It is possible to create customized XSLT files that
 apply certain processing to the metadata value, but this is not the default
 behavior.</p></li>
<li><p>After the metadata is finished, a blank line triggers the beginning of the
 rest of the document.</p></li>
</ul>

<h3 id="metadatavariables">Metadata &#8220;Variables&#8221;</h3>

<p>You can substitute the <code>value</code> for a metadata <code>key</code> in the body of a document using the following format, where <code>foo</code> and <code>bar</code> are the <code>key</code>s of the desired metadata.</p>

<pre><code># A Variable in a Heading [%foo] #

A variable in the body [%bar].
</code></pre>

<h3 id="standardmetadatakeys">&#8220;Standard&#8221; Metadata keys</h3>

<p>There are a few metadata keys that are standardized in MultiMarkdown. You can
use any other keys that you desire, but you have to make use of them yourself.</p>

<p>My goal is to keep the list of &#8220;standard&#8221; metadata keys as short as possible.</p>

<h4 id="author">Author</h4>

<p>This value represents the author of the document and is used in LaTeX, ODF, and RTF
documents to generate the title information.</p>

<h4 id="affiliation">Affiliation</h4>

<p>This is used to enter further information about the author &#8212; a link to a
website, the name of an employer, academic affiliation, etc.</p>

<h4 id="baseheaderlevel">Base Header Level</h4>

<p>This is used to change the top level of organization of the document. For example:</p>

<pre><code>Base Header Level: 2

# Introduction #
</code></pre>

<p>Normally, the Introduction would be output as <code>&lt;h1&gt;</code> in <abbr title="HyperText Markup Language">HTML</abbr>, or <code>\part{}</code> in
LaTeX. If you&#8217;re writing a shorter document, you may wish for the largest
division in the document to be <code>&lt;h2&gt;</code> or <code>\chapter{}</code>. The <code>Base Header Level</code>
metadata tells MultiMarkdown to change the largest division level to the
specified value.</p>

<p>This can also be useful when combining multiple documents.</p>

<p><code>Base Header Level</code> does not trigger a complete document.</p>

<p>Additionally, there are &#8220;flavors&#8221; of this metadata key for various output
formats so that you can specify a different header level for different output
formats &#8212; e.g. <code>LaTeX Header Level</code>, <code>HTML Header Level</code>, and <code>ODF Header
Level</code>.</p>

<p>If you are doing something interesting with <a href="#filetransclusion">File Transclusion</a>, you can also use a
negative number here. Since metadata is not used when a file is &#8220;transcluded&#8221;,
this allows you to use a different level of headings when a file is processed on
its own.</p>

<h4 id="bibliostyle">Biblio Style</h4>

<p>This metadata specifies the name of the BibTeX style to be used, if you are
not using natbib.</p>

<h4 id="bibtex">BibTeX</h4>

<p>This metadata specifies the name of the BibTeX file used to store citation
information. Do not include the trailing &#8216;.bib&#8217;.</p>

<h4 id="copyright">Copyright</h4>

<p>This can be used to provide a copyright string.</p>

<h4 id="css">CSS</h4>

<p>This metadata specifies a URL to be used as a CSS file for the produced
document. Obviously, this is only useful when outputting to <abbr title="HyperText Markup Language">HTML</abbr>.</p>

<h4 id="date">Date</h4>

<p>Specify a date to be associated with the document.</p>

<h4 id="htmlheader">HTML Header</h4>

<p>You can include raw <abbr title="HyperText Markup Language">HTML</abbr> information to be included in the header.
MultiMarkdown doesn&#8217;t perform any validation on this data &#8212; it just copies
it as is.</p>

<p>As an example, this can be useful to link your document to a working MathJax
installation (not provided by me):</p>

<pre><code>HTML header:  &lt;script type=&quot;text/javascript&quot;
    src=&quot;http://example.net/mathjax/MathJax.js&quot;&gt;
    &lt;/script&gt;
</code></pre>

<h4 id="quoteslanguage">Quotes Language</h4>

<p>This is used to specify which style of &#8220;smart&#8221; quotes to use in the output document. The available options are:</p>

<ul>
<li>dutch (or <code>nl</code>)</li>
<li>english</li>
<li>french (<code>fr</code>)</li>
<li>german (<code>de</code>)</li>
<li>germanguillemets</li>
<li>swedish (<code>sv</code>)</li>
</ul>

<p>The default is <code>english</code> if not specified. This affects <abbr title="HyperText Markup Language">HTML</abbr> output. To
change the language of a document in LaTeX is up to the individual.</p>

<p><code>Quotes Language</code> does not trigger a complete document.</p>

<h4 id="latexauthor">LaTeX Author</h4>

<p>Since MultiMarkdown syntax is not processed inside of metadata, you can use the <code>latex author</code> metadata to override the regular author metadata when exporting to LaTeX.</p>

<p>This metadata <em>must</em> come after the regular <code>author</code> metadata if it is also being used.</p>

<h4 id="latexfooter">LaTeX Footer</h4>

<p>A special case of the <code>LaTeX Input</code> metadata below. This file will be linked
to at the very end of the document.</p>

<h4 id="latexinput">LaTeX Input</h4>

<p>When outputting a LaTeX document it is necessary to include various directions
that specify how the document should be formatted. These are not included in
the MultiMarkdown document itself &#8212; instead they should be stored separately
and linked to with <code>\input{file}</code> commands.</p>

<p>These links can be included in the metadata section. The metadata is processed
in order, so I generally break my directives into a group that need to go
before my metadata, a group that goes after the metadata but before the
document itself, and a separate group that goes at the end of the document,
for example:</p>

<pre><code>latex input:        mmd-memoir-header
Title:              MultiMarkdown Example
Base Header Level:  2
latex mode:         memoir
latex input:        mmd-memoir-begin-doc
latex footer:       mmd-memoir-footer
</code></pre>

<p>You can download the <a href="https://github.com/fletcher/peg-multimarkdown-latex-support">LaTeX Support Files</a> if you want to output documents
using the default MultiMarkdown styles. You can then use these as examples to
create your own customized LaTeX output.</p>

<p>This function should allow you to do almost anything you could do using the
XSLT features from MultiMarkdown 2.0. More importantly, it means that advanced
LaTeX users do not have to learn XSLT to customize their code as desired.</p>

<h4 id="latexmode">LaTeX Mode</h4>

<p>When outputting a document to LaTeX, there are two special options that change
the output slightly &#8212; <code>memoir</code> and <code>beamer</code>. These options are designed to
be compatible with the LaTeX classes of the same names.</p>

<h4 id="latextitle">LaTeX Title</h4>

<p>Since MultiMarkdown syntax is not processed inside of metadata, you can use the <code>latex title</code> metadata to override the regular title metadata when exporting to LaTeX.</p>

<p>This metadata <em>must</em> come after the regular <code>title</code> metadata if it is also being used.</p>

<h4 id="mmdfooter">MMD Footer</h4>

<p>The <code>MMD Footer</code> metadata is used to specify the name of a file that should be appended to the end of the document using the <a href="#filetransclusion">File Transclusion</a> feature. This is useful for keeping a list of references, abbreviations, footnotes, links, etc. all in a single file that can be reused across multiple documents. If you&#8217;re building a big document out of smaller documents, this allows you to use one list in all files, without multiple copies being inserted in the master file.</p>

<h4 id="odfheader">ODF Header</h4>

<p>You can include raw XML to be included in the header of a file output in
OpenDocument format. It&#8217;s up to you to properly format your XML and get it
working &#8212; MultiMarkdown just copies it verbatim to the output.</p>

<h4 id="title">Title</h4>

<p>Self-explanatory.</p>

<h4 id="transcludebase">Transclude Base</h4>

<p>When using the <a href="#filetransclusion">File Transclusion</a> feature to &#8220;link&#8221; to other documents inside a MultiMarkdown document, this metadata specifies a folder that contains the files being linked to. If omitted, the default is the folder containing the file in question. This can be a relative path or a complete path.</p>

<p>This metadata can be particularly useful when using MultiMarkdown to parse a text string that does not exist as a file on the computer, and therefore does not have a parent folder (when using <code>stdin</code> or another application that offers MultiMarkdown support). In this case, the path must be a complete path.</p>

<h3 id="smarttypography">Smart Typography</h3>

<p>MultiMarkdown incorporates John Gruber&#8217;s <a href="http://daringfireball.net/projects/smartypants/">SmartyPants</a> tool in addition to the core Markdown functionality. This program converts &#8220;plain&#8221; punctuation into &#8220;smarter&#8221; typographic punctuation.</p>

<p>Just like the original, MultiMarkdown converts:</p>

<ul>
<li>Straight quotes (<code>&quot;</code> and <code>'</code>) into &#8220;curly&#8221; quotes</li>
<li>Backticks-style quotes (<code>``this''</code>) into &#8220;curly&#8221; quotes</li>
<li>Dashes (<code>--</code> and <code>---</code>) into en- and em- dashes</li>
<li>Three dots (<code>...</code>) become an ellipsis</li>
</ul>

<p>MultiMarkdown also includes support for quotes styles other than English (the default). Use the <code>quotes language</code> metadata to choose:</p>

<ul>
<li>dutch (<code>nl</code>)</li>
<li>german(<code>de</code>)</li>
<li>germanguillemets</li>
<li>french(<code>fr</code>)</li>
<li>swedish(<code>sv</code>)</li>
</ul>

<p>This feature is enabled by default, but is disabled in <code>compatibility</code> mode, since it is not part of the original Markdown. You can also use the <code>smart</code> and <code>nosmart</code> command line options to control this feature.</p>

<h3 id="cross-references">Cross-References</h3>

<p>An oft-requested feature was the ability to have Markdown automatically handle
within-document links as easily as it handled external links. To this aim, I
added the ability to interpret <code>[Some Text][]</code> as a cross-link, if a header
named &#8220;Some Text&#8221; exists.</p>

<p>As an example, <code>[Metadata][]</code> will take you to the
<a href="#metadata">section describing metadata</a>.</p>

<p>Alternatively, you can include an optional label of your choosing to help
disambiguate cases where multiple headers have the same title:</p>

<pre><code>### Overview [MultiMarkdownOverview] ##
</code></pre>

<p>This allows you to use <code>[MultiMarkdownOverview]</code> to refer to this section
specifically, and not another section named <code>Overview</code>. This works with atx-
or settext-style headers.</p>

<p>If you have already defined an anchor using the same id that is used by a
header, then the defined anchor takes precedence.</p>

<p>In addition to headers within the document, you can provide labels for images
and tables which can then be used for cross-references as well.</p>

<h3 id="linkandimageattributes">Link and Image Attributes</h3>

<p>Adding attributes to links and images has been requested for a long time on
the Markdown discussion list. I was fairly opposed to this, as most of the
proposals really disrupted the readability of the syntax. I consider myself a
&#8220;Markdown purist&#8221;, meaning that I took John&#8217;s introduction to heart:</p>

<blockquote>
<p>The overriding design goal for Markdown&#8217;s formatting syntax is to make
it as readable as possible. The idea is that a Markdown-formatted
document should be publishable as-is, as plain text, without looking
like it&#8217;s been marked up with tags or formatting instructions. While
Markdown&#8217;s syntax has been influenced by several existing text-to-<abbr title="HyperText Markup Language">HTML</abbr>
filters, the single biggest source of inspiration for Markdown&#8217;s
syntax is the format of plain text email.</p>
</blockquote>

<p>Because there was not a syntax proposal that I felt fit this goal, I was generally opposed to the idea.</p>

<p>Then, Choan C. Gálvez <a href="http://six.pairlist.net/pipermail/markdown-discuss/2005-October/001578.html">proposed</a> a brilliantly simple syntax that
stayed out of the way. By simply appending the attributes to the link
reference information, which is already removed from the text itself, it
doesn&#8217;t disturb the readability.</p>

<p>For example:</p>

<pre><code>This is a formatted ![image][] and a [link][] with attributes.

[image]: http://path.to/image &quot;Image title&quot; width=40px height=400px
[link]:  http://path.to/link.html &quot;Some Link&quot; class=external
         style=&quot;border: solid black 1px;&quot;
</code></pre>

<p>This will generate width and height attributes for the image, and a border
around the link. And while it can be argued that it does look &#8220;like it&#8217;s been
marked up with tags [and] formatting instructions&#8221;, even I can&#8217;t argue too
strongly against it. The link and the title in quotes already look like some
form of markup, and the the additional tags are hardly that intrusive, and
they offer a great deal of functionality. They might even be useful in further
functions (citations?).</p>

<p>The attributes must continue after the other link/image data, and may contain
newlines, but must start at the beginning of the line. The format is
<code>attribute=value</code> or <code>attribute=&quot;multi word value&quot;</code>. Currently, MultiMarkdown
does not attempt to interpret or make any use of any of these attributes.
Also, you can&#8217;t have a multiword attribute span a newline.</p>

<h3 id="images">Images</h3>

<p>The basic syntax for images in Markdown is:</p>

<pre><code>![Alt text](/path/to/img.jpg)

![Alt text](/path/to/img.jpg &quot;Optional title&quot;)


![Alt text][id]

[id]: url/to/image  &quot;Optional title attribute&quot;
</code></pre>

<p>In addition to the attributes you can use with links and images (described in the previous section), MultiMarkdown also adds a few additional things. If an image is the only thing in a paragraph, it is treated as a block level element:</p>

<pre><code>This image (![Alt text](/path/to/img.jpg))
is different than the following image:

![Alt text](/path/to/img.jpg)
</code></pre>

<p>The resulting <abbr title="HyperText Markup Language">HTML</abbr> is:</p>

<pre><code>&lt;p&gt;This image (&lt;img src=&quot;/path/to/img.jpg&quot; alt=&quot;Alt text&quot; /&gt;)
is different than the following image:&lt;/p&gt;

&lt;figure&gt;
&lt;img src=&quot;/path/to/img.jpg&quot; alt=&quot;Alt text&quot; /&gt;
&lt;figcaption&gt;Alt text&lt;/figcaption&gt;
&lt;/figure&gt;
</code></pre>

<p>The first one would be an inline image. The second one (in <abbr title="HyperText Markup Language">HTML</abbr>) would be wrapped in an <abbr title="HyperText Markup Language">HTML</abbr> <code>figure</code> element. In this case, the <code>alt</code> text is also used as a figure caption, and can contain MultiMarkdown syntax (e.g. bold, emph, etc.). The alt text is not specifically designed to limit which MultiMarkdown is supported, but there will be limits and block level elements aren&#8217;t supported.</p>

<h3 id="tables">Tables</h3>

<h4 id="tablebasics">Table Basics</h4>

<p>MultiMarkdown has a special syntax for creating tables. It is generally compatible with the syntax used by Michael Fortin for <a href="http://www.michelf.com/projects/php-markdown/extra/">PHP Markdown Extra</a></p>

<p>Basically, it allows you to turn:</p>

<pre><code>|             |          Grouping           ||
First Header  | Second Header | Third Header |
 ------------ | :-----------: | -----------: |
Content       |          *Long Cell*        ||
Content       |   **Cell**    |         Cell |

New section   |     More      |         Data |
And more      | With an escaped '\|'         ||  
[Prototype table]
</code></pre>

<p>into the following <a href="#prototypetable">table</a>.</p>

<table>
<caption id="prototypetable">Prototype table</caption>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:center;"/>
<col style="text-align:right;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"></th>
	<th style="text-align:center;" colspan="2">Grouping</th>
</tr>
<tr>
	<th style="text-align:left;">First Header</th>
	<th style="text-align:center;">Second Header</th>
	<th style="text-align:right;">Third Header</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">Content</td>
	<td style="text-align:center;" colspan="2"><em>Long Cell</em></td>
</tr>
<tr>
	<td style="text-align:left;">Content</td>
	<td style="text-align:center;"><strong>Cell</strong></td>
	<td style="text-align:right;">Cell</td>
</tr>
</tbody>

<tbody>
<tr>
	<td style="text-align:left;">New section</td>
	<td style="text-align:center;">More</td>
	<td style="text-align:right;">Data</td>
</tr>
<tr>
	<td style="text-align:left;">And more</td>
	<td style="text-align:center;" colspan="2">With an escaped &#8216;|&#8217;</td>
</tr>
</tbody>
</table>

<h4 id="tablerules">Table Rules</h4>

<p>The requirements are:</p>

<ul>
<li>There must be at least one <code>|</code> per line</li>
<li>The &#8220;separator&#8221; line between headers and table content must contain only <code>|</code>,<code>-</code>, <code>=</code>, <code>:</code>,<code>.</code>, <code>+</code>, or spaces</li>
<li>Cell content must be on one line only</li>
<li>Columns are separated by <code>|</code></li>
<li>The first line of the table, and the alignment/divider line, must start at
the beginning of the line</li>
</ul>

<p>Other notes:</p>

<ul>
<li><p>It is optional whether you have <code>|</code> characters at the beginning and end of lines.</p></li>
<li><p>The &#8220;separator&#8221; line uses <code>----</code> or <code>====</code> to indicate the line between a header and cell. The length of the line doesn&#8217;t matter, but must have at least one character per cell.</p></li>
<li><p>To set alignment, you can use a colon to designate left or right alignment, or a colon at each end to designate center alignment, as above. If no colon is present, the default alignment of your system is selected (left in most cases). If the separator line ends with <code>+</code>, then cells in that column will be wrapped when exporting to LaTeX if they are long enough.</p></li>
<li><p>To indicate that a cell should span multiple columns, then simply add additional pipes (<code>|</code>) at the end of the cell, as shown in the example. If the cell in question is at the end of the row, then of course that means that pipes are not optional at the end of that row&#8230;. The number of pipes equals the number of columns the cell should span.</p></li>
<li><p>You can use normal Markdown markup within the table cells.</p></li>
<li><p>Captions are optional, but if present must be at the beginning of the line
 immediately preceding or following the table, start with <code>[</code>, and end with
 <code>]</code>. If you have a caption before and after the table, only the first match
 will be used.</p></li>
<li><p>If you have a caption, you can also have a label, allowing you to create
 anchors pointing to the table. If there is no label, then the caption acts
 as the label</p></li>
<li><p>Cells can be empty.</p></li>
<li><p>You can create multiple <code>&lt;tbody&gt;</code> tags (for <abbr title="HyperText Markup Language">HTML</abbr>) within a table by having a <strong>single</strong> empty line between rows of the table. This allows your CSS to place horizontal borders to emphasize different sections of the table. This feature doesn&#8217;t work in all output formats (e.g. RTF and OpenDocument).</p></li>
</ul>

<h4 id="limitationsoftables">Limitations of Tables</h4>

<ul>
<li><p>MultiMarkdown table support is designed to handle <em>most</em> tables for <em>most</em> people; it doesn&#8217;t cover <em>all</em> tables for <em>all</em> people. If you need complex tables you will need to create them by hand or with a tool specifically designed for your output format. At some point, however, you should consider whether a table is really the best approach if you find MultiMarkdown tables too limiting.</p></li>
<li><p>Native RTF support for tables is <em>very</em> limited. If you need more complex tables, I recommend using the OpenDocument format, and then using <a href="http://www.libreoffice.org/">LibreOffice</a> to convert your document to RTF.</p></li>
</ul>

<h3 id="footnotes">Footnotes</h3>

<p>I have added support for footnotes to MultiMarkdown, using the syntax proposed
by John Gruber. Note that there is no official support for footnotes yet, so
the output format may change, but the input format sounds fairly stable.</p>

<p>To create a footnote, enter something like the following:</p>

<pre><code>Here is some text containing a footnote.[^somesamplefootnote]

[^somesamplefootnote]: Here is the text of the footnote itself.

[somelink]:http://somelink.com
</code></pre>

<p>The footnote itself must be at the start of a line, just like links by
reference. If you want a footnote to have multiple paragraphs, lists, etc.,
then the subsequent paragraphs need an extra tab preceding them. You may have
to experiment to get this just right, and please let me know of any issues you
find.</p>

<p>This is what the final result looks like:</p>

<blockquote>
<p>Here is some text containing a footnote.<a href="#fn:1" id="fnref:1" title="see footnote" class="footnote">[1]</a></p>
</blockquote>

<p>You can also use &#8220;inline footnotes&#8221;:</p>

<pre><code>Here is another footnote.[^This is the footnote itself]
</code></pre>

<h3 id="citations">Citations</h3>

<p>I have included support for <em>basic</em> bibliography features in this version of
MultiMarkdown. Please give me feedback on ways to improve this but keep the
following in mind:</p>

<ol>
<li><p>Bibliography support in MultiMarkdown is rudimentary. The goal is to offer
a basic standalone feature, that can be changed using the tool of your choice
to a more robust format (e.g. BibTeX, CiteProc). My XSLT files demonstrate how
to make this format compatible with BibTeX, but I am not planning on
personally providing compatibility with other tools. Feel free to post your
ideas and tools to the wiki.</p></li>
<li><p>Those needing more detailed function sets for their bibliographies may need
customized tools to provide those services. This is a basic tool that should
work for most people. Reference librarians will probably not be satisfied
however.</p></li>
</ol>

<p>To use citations in MultiMarkdown, you use a syntax much like that for
anchors:</p>

<pre><code>This is a statement that should be attributed to
its source[p. 23][#Doe:2006].

And following is the description of the reference to be
used in the bibliography.

[#Doe:2006]: John Doe. *Some Big Fancy Book*.  Vanity Press, 2006.
</code></pre>

<p>In <abbr title="HyperText Markup Language">HTML</abbr> output, citations are indistinguishable from footnotes.</p>

<p>You are not required to use a locator (e.g. p. 23), and there are
no special rules on what can be used as a locator if you choose
to use one. If you prefer to omit the locator, just use an empty
set of square brackets before the citation:</p>

<pre><code>This is a statement that should be attributed to its 
source[][#Doe:2006].
</code></pre>

<p>There are no rules on the citation key format that you use (e.g. <code>Doe:2006</code>),
but it must be preceded by a <code>#</code>, just like footnotes use <code>^</code>.</p>

<p>As for the reference description, you can use Markup code within this section,
and I recommend leaving a blank line afterwards to prevent concatenation of
several references. Note that there is no way to reformat these references in
different bibliography styles; for this you need a program designed for that
purpose (e.g. BibTeX).</p>

<p>If you want to include a source in your bibliography that was not cited, you
may use the following:</p>

<pre><code>[Not cited][#citekey]
</code></pre>

<p>The <code>Not cited</code> bit is not case sensitive.</p>

<p>If you are creating a LaTeX document, the citations will be included, and
natbib will be used by default. If you are not using BibTeX and are getting
errors about your citations not being compatible with &#8216;Author-Year&#8217;, you can
add the following to your documents metadata:</p>

<pre><code>latex input:        mmd-natbib-plain
</code></pre>

<p>This changes the citation style in natbib to avoid these errors, and is useful
when you include your citations in the MultiMarkdown document itself.</p>

<h3 id="bibtex">BibTeX</h3>

<p>If you are creating a LaTeX document, and need a bibliography, then you should
definitely look into <a href="http://www.bibtex.org/">BibTeX</a> and
<a href="http://merkel.zoneo.net/Latex/natbib.php">natbib</a>. It is beyond the scope of
this document to describe how these two packages work, but it is possible to
combine them with MultiMarkdown.</p>

<p>To use BibTeX in a MultiMarkdown document, you need to use the <a href="#bibtex"><code>BibTeX</code>
metadata</a> to specify where your citations are stored.</p>

<p>Since <code>natbib</code> is enabled by default, you have a choice between using the
<code>\citep</code> and <code>\citet</code> commands. The following shows how this relates to the
MultiMarkdown syntax used.</p>

<pre><code>[#citekey]    =&gt; ~\citep{citekey}
[#citekey][]  =&gt; ~\citep{citekey}

[foo][#citekey] =&gt; ~\citep[foo]{citekey}

[foo\]\[bar][#citekey] =&gt; ~\citep[foo][bar]{citekey}


[#citekey;]    =&gt; \citet{citekey}
[#citekey;][]  =&gt; \citet{citekey}

[foo][#citekey;] =&gt; \citet[foo]{citekey}

[foo\]\[bar][#citekey;] =&gt; \citet[foo][bar]{citekey}
</code></pre>

<h3 id="definitionlists">Definition Lists</h3>

<p>MultiMarkdown has support for definition lists using the same syntax used in
<a href="http://www.michelf.com/projects/php-markdown/extra/">PHP Markdown Extra</a>. Specifically:</p>

<pre><code>Apple
:   Pomaceous fruit of plants of the genus Malus in 
    the family Rosaceae.
:   An american computer company.

Orange
:   The fruit of an evergreen tree of the genus Citrus.
</code></pre>

<p>becomes:</p>

<blockquote>
<dl>
<dt>Apple</dt>
<dd>Pomaceous fruit of plants of the genus Malus in
 the family Rosaceae.</dd>

<dd>An american computer company.</dd>

<dt>Orange</dt>
<dd>The fruit of an evergreen tree of the genus Citrus.</dd>
</dl>
</blockquote>

<p>You can have more than one term per definition by placing each term on a
separate line. Each definition starts with a colon, and you can have more than
one definition per term. You may optionally have a blank line between the last
term and the first definition.</p>

<p>Definitions may contain other block level elements, such as lists,
blockquotes, or other definition lists.</p>

<p>Unlike PHP Markdown Extra, all definitions are wrapped in <code>&lt;p&gt;</code> tags. First, I
was unable to get Markdown <em>not</em> to create paragraphs. Second, I didn&#8217;t see
where it mattered - the only difference seems to be aesthetic, and I actually
prefer the <code>&lt;p&gt;</code> tags in place. Let me know if this is a problem.</p>

<p>See the <a href="http://www.michelf.com/projects/php-markdown/extra/">PHP Markdown Extra</a> page for more information.</p>

<h3 id="abbreviations">Abbreviations</h3>

<p>MultiMarkdown includes support for abbreviations, as implemented in Michel Fortin&#8217;s <a href="http://michelf.ca/projects/php-markdown/extra/">PHP Markdown Extra</a>. Basically, you define an abbreviation using the following syntax:</p>

<pre><code>*[HTML]: HyperText Markup Language
*[W3C]:  World Wide Web Consortium
</code></pre>

<p>Then, wherever you use the words <code>HTML</code> or <code>W3C</code> in your document, the <code>abbr</code> markup will be added:</p>

<pre><code>The HTML specification
is maintained by the W3C.
</code></pre>

<p>becomes:</p>

<pre><code>The &lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt; specification
is maintained by the &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt;.
</code></pre>

<p>Here&#8217;s an example using <abbr title="HyperText Markup Language">HTML</abbr> and <abbr title="World Wide Web Consortium">W3C</abbr>. The exact behavior will depend on which format you are viewing this document in. Especially if we use <abbr title="HyperText Markup Language">HTML</abbr> and <abbr title="World Wide Web Consortium">W3C</abbr> again. (Remember that <abbr title="HyperText Markup Language">HTML</abbr> has probably already been used if you&#8217;re viewing a longer version of this document.)</p>

<p>As in PHP Markdown Extra, abbreviations are case-sensitive and will work on multiple word abbreviations. In this case, MultiMarkdown is tolerant of different variations of whitespace between words.</p>

<pre><code>Operation Tigra Genesis is going well.

*[Tigra Genesis]:
</code></pre>

<p>An abbreviation with an empty definition results in an omitted <code>title</code> attribute.</p>

<p>There are a few limitations:</p>

<ul>
<li>The full name of the abbreviation is plain text only &#8211; no MultiMarkdown markup will be processed.</li>
<li>Abbreviations don&#8217;t do anything when exporting to ODF &#8211; there&#8217;s not an equivalent structure there &#8211; it would have to be hand coded. I may or may not get around to this, but pull requests welcome. ;)</li>
<li>When exporting to LaTeX, the <code>acronym</code> package is used; this means that the first usage will result in <code>full text (short)</code>, and subsequent uses will result in <code>short</code>.</li>
</ul>

<h3 id="fencedcodeblocks">Fenced Code Blocks</h3>

<p>In addition to the regular indented code block that Markdown uses, you can use &#8220;fenced&#8221; code blocks in MultiMarkdown. These code blocks do not have to be indented, and can also be configured to be compatible with a third party syntax highlighter. These code blocks should begin with 3 to 5 backticks, an optional language specifier (if using a syntax highlighter), and should end with the same number of backticks you started with:</p>

<pre><code class="perl"># Demonstrate Syntax Highlighting if you link to highlight.js #
# http://softwaremaniacs.org/soft/highlight/en/
print &quot;Hello, world!\n&quot;;
$a = 0;
while ($a &lt; 10) {
print &quot;$a...\n&quot;;
$a++;
}
</code></pre>

<p>I don&#8217;t recommend any specific syntax highlighter, but have used the following metadata to set things up. It may or may not work for you:</p>

<pre><code>html header:    &lt;link rel=&quot;stylesheet&quot; href=&quot;http://yandex.st/highlightjs/7.3/styles/default.min.css&quot;&gt;
    &lt;script src=&quot;http://yandex.st/highlightjs/7.3/highlight.min.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;
</code></pre>

<p>Fenced code blocks are particularly useful when including another file (<a href="#filetransclusion">File Transclusion</a>), and you want to show the <em>source</em> of the file, not what the file looks like when processed by MultiMarkdown.</p>

<h3 id="math">Math</h3>

<p>MultiMarkdown 2.0 used <a href="http://www1.chapman.edu/~jipsen/mathml/asciimath.html">ASCIIMathML</a> to typeset mathematical equations. There
were benefits to using ASCIIMathML, but also some disadvantages.</p>

<p>When rewriting for MultiMarkdown 3.0, there was no straightforward way to
implement ASCIIMathML which lead me to look for alternatives. I settled on
using <a href="http://www.mathjax.org/">MathJax</a>. The advantage here is that the same syntax is supported by
MathJax in browsers, and in LaTeX. </p>

<p>This does mean that math will need to be entered into MultiMarkdown documents
using the LaTeX syntax, rather than ASCIIMathML.</p>

<p>To enable MathJax support in web pages, you have to include a link to an
active MathJax installation &#8212; setting this up is beyond the scope of this
document, but it&#8217;s not too hard.</p>

<p>Here&#8217;s an example of the metadata setup, and some math:</p>

<pre><code>latex input:    mmd-article-header  
Title:          MultiMarkdown Math Example  
latex input:    mmd-article-begin-doc  
latex footer:   mmd-memoir-footer  
HTML header:    &lt;script type=&quot;text/javascript&quot;
                src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;
                &lt;/script&gt;


An example of math within a paragraph --- \\({e}^{i\pi }+1=0\\)
--- easy enough.

And an equation on it's own:

\\[ {x}_{1,2}=\frac{-b\pm \sqrt{{b}^{2}-4ac}}{2a} \\]

That's it.
</code></pre>

<p>Here&#8217;s what it looks like in action (if you&#8217;re viewing this document in a
supported format):</p>

<blockquote>
<p>An example of math within a paragraph &#8212; <span class="math">\({e}^{i\pi }+1=0\)</span>
&#8212; easy enough.</p>

<p>And an equation on it&#8217;s own:</p>

<p><span class="math">\[ {x}_{1,2}=\frac{-b\pm \sqrt{{b}^{2}-4ac}}{2a} \]</span></p>

<p>That&#8217;s it.</p>
</blockquote>

<p>In addition to the <code>\\[ \\]</code> and <code>\\( \\)</code> syntax, you can use LaTeX style &#8220;dollar sign&#8221; delimiters:</p>

<pre><code>An example of math within a paragraph --- ${e}^{i\pi }+1=0$
--- easy enough.

And an equation on it's own:

$${x}_{1,2}=\frac{-b\pm \sqrt{{b}^{2}-4ac}}{2a}$$

That's it.
</code></pre>

<p>In order to be correctly parsed as math, there must not be any space between the <code>$</code> and the actual math on the inside of the delimiter, and there <em>must</em> be space on the outside.</p>

<h3 id="superscriptsandsubscripts">Superscripts and Subscripts</h3>

<p>You can easily include superscripts and subscripts in MultiMarkdown as well:</p>

<pre><code>This apartment has an area of 100m^2
One must consider the value of x~z
</code></pre>

<p>becomes</p>

<blockquote>
<p>This apartment has an area of 100m<sup>2</sup><br/>
One must consider the value of x<sub>z</sub></p>
</blockquote>

<p>The subscript must not contain any whitespace or punctuation.</p>

<p>More complicated exponents and subscripts can be delimited like this:</p>

<pre><code>y^(a+b)^
x~y,z~
</code></pre>

<blockquote>
<p>y<sup>(a+b)</sup><br/>
x<sub>y,z</sub></p>
</blockquote>

<h3 id="glossaries">Glossaries</h3>

<p>MultiMarkdown has a feature that allows footnotes to be specified as glossary
terms. It doesn&#8217;t do much for XHTML documents, but the XSLT file that converts
the document into LaTeX is designed to convert these special footnotes into
glossary entries.</p>

<p>The glossary format for the footnotes is:</p>

<pre><code>[^glossaryfootnote]: glossary: term (optional sort key)
    The actual definition belongs on a new line, and can continue on
    just as other footnotes.
</code></pre>

<p>The <code>term</code> is the item that belongs in the glossary. The <code>sort key</code> is
optional, and is used to specify that the term should appear somewhere else in
the glossary (which is sorted in alphabetical order).</p>

<p>Unfortunately, it takes an extra step to generate the glossary when creating a
pdf from a latex file:</p>

<ol>
<li><p>You need to have the <code>basic.gst</code> file installed, which comes with the
memoir class.</p></li>
<li><p>You need to run a special makeindex command to generate the <code>.glo</code> file:
 <code>makeindex -s `kpsewhich basic.gst` -o &quot;filename.gls&quot; &quot;filename.glo&quot;</code></p></li>
<li><p>Then you run the usual pdflatex command again a few times.</p></li>
</ol>

<p>Alternatively, you can use the code below to create an engine file for TeXShop
(it belongs in <code>~/Library/TeXShop/Engines</code>). You can name it something like
<code>MemoirGlossary.engine</code>. Then, when processing a file that needs a glossary,
you typeset your document once with this engine, and then continue to process
it normally with the usual LaTeX engine. Your glossary should be compiled
appropriately. If you use <a href="http://www.uoregon.edu/~koch/texshop/" title="TeXShop Homepage">TeXShop</a>, this is the way to go.</p>

<p><strong>Note</strong>: <em>Getting glossaries to work is a slightly more advanced LaTeX
feature, and might take some trial and error the first few times.</em></p>

<pre><code>#!/bin/ 

set path = ($path /usr/local/teTeX/bin/powerpc-apple-darwin-current 
    /usr/local/bin) # This is actually a continuation of the line above

set basefile = `basename &quot;$1&quot; .tex`

makeindex -s `kpsewhich basic.gst` -o &quot;${basefile}.gls&quot; &quot;${basefile}.glo&quot;
</code></pre>

<h3 id="criticmarkup">CriticMarkup</h3>

<h4 id="whatiscriticmarkup">What Is CriticMarkup?</h4>

<blockquote>
<p>CriticMarkup is a way for authors and editors to track changes to documents in plain text. As with Markdown, small groups of distinctive characters allow you to highlight insertions, deletions, substitutions and comments, all without the overhead of heavy, proprietary office suites. <a href="http://criticmarkup.com/">http://criticmarkup.com/</a></p>
</blockquote>

<p>CriticMarkup is integrated with MultiMarkdown itself, as well as <a href="http://multimarkdown.com/">MultiMarkdown Composer</a>. I encourage you to check out the web site to learn more as it can be a very useful tool. There is also a great video showing CriticMarkup in use while editing a document in MultiMarkdown Composer.</p>

<h4 id="thecriticmarkupsyntax">The CriticMarkup Syntax</h4>

<p>The CriticMarkup syntax is fairly straightforward. The key thing to remember is that CriticMarkup is processed <em>before</em> any other MultiMarkdown is handled. It&#8217;s almost like a separate layer on top of the MultiMarkdown syntax.</p>

<p>When editing in MultiMarkdown Composer, you can have CriticMarkup syntax flagged in the both the editor pane and the preview window. This will allow you to see changes in the <abbr title="HyperText Markup Language">HTML</abbr> preview.</p>

<p>When using CriticMarkup with MultiMarkdown itself, you have four choices:</p>

<ul>
<li>Leave the CriticMarkup syntax in place (<code>multimarkdown foo.txt</code>)</li>
<li>Accept all changes, giving you the &#8220;new&#8221; document (<code>multimarkdown -a foo.txt</code>)</li>
<li>Reject all changes, giving you the &#8220;original&#8221; document (<code>multimarkdown -r foo.txt</code>)</li>
<li>Attempt to show the changes as highlights. This only works in <abbr title="HyperText Markup Language">HTML</abbr>, and to use it you ask for the new and original document at the same time (<code>multimarkdown -a -r foo.txt</code>)</li>
</ul>

<p>CriticMarkup comments and highlighting are ignored when processing.</p>

<p>Deletions from the original text:</p>

<pre><code>This is {--is --}a test.
</code></pre>

<p>Additions:</p>

<pre><code>This {++is ++}a test.
</code></pre>

<p>Substitutions:</p>

<pre><code>This {~~isn't~&gt;is~~} a test.
</code></pre>

<p>Highlighting:</p>

<pre><code>This is a {==test==}.
</code></pre>

<p>Comments:</p>

<pre><code>This is a test{&gt;&gt;What is it a test of?&lt;&lt;}.
</code></pre>

<h4 id="myphilosophyoncriticmarkup">My philosophy on CriticMarkup</h4>

<p>I view CriticMarkup as two things:</p>

<ol>
<li><p>A syntax for documenting editing notes and changes, and for collaborating amongst coauthors.</p></li>
<li><p>A means to display those notes/changes in the <abbr title="HyperText Markup Language">HTML</abbr> output.</p></li>
</ol>

<p>I believe that #1 is a really great idea, and well implemented. #2 is not so well implemented, largely due to the &#8220;orthogonal&#8221; nature of CriticMarkup and the underlying Markdown syntax.</p>

<p>CM is designed as a separate layer on top of Markdown/MultiMarkdown. This means that a Markdown span could, for example, start in the middle of a CriticMarkup structure, but end outside of it. This means that an algorithm to properly convert a CM/Markdown document to <abbr title="HyperText Markup Language">HTML</abbr> would be quite complex, with a huge number of edge cases to consider. I&#8217;ve tried a few (fairly creative, in my opinion) approaches, but they didn&#8217;t work. Perhaps someone else will come up with a better solution, or will be so interested that they put the work in to create the complex algorithm. I have no current plans to do so.</p>

<p>Additionally, there is a philosophical distinction between documenting editing notes, and using those notes to produce a &#8220;finished&#8221; document (e.g. <abbr title="HyperText Markup Language">HTML</abbr> or PDF) that keeps those editing notes intact (e.g. strikethroughs, highlighting, etc.) I believe that CM is incredibly useful for the editing process, but am less convinced for the output process (I know many others disagree with me, and that&#8217;s ok. And to be clear, I think that what Gabe and Erik have done with CriticMarkup is fantastic!)</p>

<p>There are other CriticMarkup tools besides MultiMarkdown and <a href="http://multimarkdown.com/">MultiMarkdown Composer</a>, and you are more than welcome to use them.</p>

<p>For now, the <em>official</em> MultiMarkdown support for CriticMarkup consists of:</p>

<ol>
<li>CriticMarkup syntax is &#8220;understood&#8221; by the MultiMarkdown parser, and by MultiMarkdown Composer syntax highlighting.</li>
<li>When converting from MultiMarkdown text to an output format, you can ignore CM formatting (probably not what you want to do), accept all changes, or reject all changes (as above). These are the preferred choices.</li>
<li>The secondary to choice, when exporting to <abbr title="HyperText Markup Language">HTML</abbr>, is to <em>attempt</em> to show the changes in the <abbr title="HyperText Markup Language">HTML</abbr> output. Because the syntaxes are orthogonal, this will not always work properly, and will not always give valid <abbr title="HyperText Markup Language">HTML</abbr> output.</li>
</ol>

<h3 id="rawhtml">Raw HTML</h3>

<p>You can include raw (X)<abbr title="HyperText Markup Language">HTML</abbr> within your document. Exactly what happens with
these portions depends on the output format. You can also use the <code>markdown</code>
attribute to indicate that MultiMarkdown processing should be applied within
the block level <abbr title="HyperText Markup Language">HTML</abbr> tag. This is in addition to the <code>--process-html</code> command
line option that causes MultiMarkdown processing to occur within <em>all</em> block
level <abbr title="HyperText Markup Language">HTML</abbr> tags.</p>

<p>For example:</p>

<pre><code>&lt;div&gt;This is *not* MultiMarkdown&lt;/div&gt;

&lt;div markdown=1&gt;This *is* MultiMarkdown&lt;/div&gt;
</code></pre>

<p>will produce the following without <code>--process-html</code>:</p>

<pre><code>&lt;div&gt;This is *not* MultiMarkdown&lt;/div&gt;

&lt;div&gt;This &lt;em&gt;is&lt;/em&gt; MultiMarkdown&lt;/div&gt;
</code></pre>

<p>and with <code>--process-html</code>:</p>

<pre><code>&lt;div&gt;This is &lt;em&gt;not&lt;/em&gt; MultiMarkdown&lt;/div&gt;

&lt;div&gt;This &lt;em&gt;is&lt;/em&gt; MultiMarkdown&lt;/div&gt;
</code></pre>

<p>However, the results may be different than anticipated when outputting to
LaTeX or other formats. Normally, block level <abbr title="HyperText Markup Language">HTML</abbr> will be ignored when
outputting to LaTeX or ODF. The example above would produce the following,
leaving out the first <code>&lt;div&gt;</code> entirely:</p>

<pre><code>This \emph{is} MultiMarkdown
</code></pre>

<p>And this with <code>--process-html</code>:</p>

<pre><code>This is \emph{not} MultiMarkdown
This \emph{is} MultiMarkdown
</code></pre>

<p>You will also notice that the line breaks are different when outputting to
LaTeX or ODF, and this can cause the contents of two <code>&lt;div&gt;</code> tags to be placed
into a single paragraph.</p>

<h3 id="rawlatexopendocumentetc.">Raw LaTeX/OpenDocument/etc.</h3>

<p>You can use <abbr title="HyperText Markup Language">HTML</abbr> comments to include additional text that will be included in the exported file without being changed. This can be used for any export format, which means that each document can only be configured for one export format at a time. In other words, it is highly unlikely that valid raw LaTeX will also be valid OpenDocument source code.</p>

<pre><code>This will be processed by *MultiMarkdown*.
&lt;!-- This will not be processed by *MultiMarkdown --&gt;
</code></pre>

<h3 id="filetransclusion">File Transclusion</h3>

<p>File transclusion is the ability to tell MultiMarkdown to insert the contents of another file inside the current file being processed. For example:</p>

<pre><code>This is some text.

{{some_other_file.txt}}

Another paragraph
</code></pre>

<p>If a file named <code>some_other_file.txt</code> exists, its contents will be inserted inside of this document <em>before</em> being processed by MultiMarkdown. This means that the contents of the file can also contain MultiMarkdown formatted text.</p>

<p>If you want to display the <em>contents</em> of the file without processing it, you can include it in a code block (you may need to remove trailing newlines at the end of the document to be included):</p>

<pre><code>This is some text

```
{{relative/path/to/some_other_file.txt}}
```

Another paragraph
</code></pre>

<p>Transclusion is recursive, so the file being inserted will be scanned to see if it references any other files.</p>

<p>Metadata in the file being inserted will be ignored. This means that the file can contain certain metadata when viewed alone that will not be included when the file is transcluded by another file.</p>

<p>You can use the <code>[Transclude Base]</code> metadata to specify where MultiMarkdown should look for the files to be included. All files must be in this folder. If this folder is not specified, then MultiMarkdown will look in the same folder as the parent file.</p>

<p><strong>Note:</strong> Thanks to David Richards for his ideas in developing support for this feature.</p>

<h4 id="wildcardextensions">Wildcard Extensions</h4>

<p>Sometimes you may wish to transclude alternate versions of a file depending on your output format. Simply use the extension &#8220;.*&#8221; to have MMD choose the proper version of the file (e.g. <code>foo.tex</code>, <code>foo.fodt</code>, <code>foo.html</code>, etc.)</p>

<pre><code>Insert a different version of a file here based on export format:
{{foo.*}}
</code></pre>

<h3 id="escapednewlines">Escaped newlines</h3>

<p>Thanks to a contribution from <a href="https://github.com/njmsdk">Nicolas</a>, MultiMarkdown has an additional syntax to indicate a line break. The usual approach for Markdown is &#8220;space-space-newline&#8221; &#8212; two spaces at the end of the line. For some users, this causes problems:</p>

<ul>
<li>the trailing spaces are typically invisible when glancing at the source, making it easy to overlook them</li>
<li>some users&#8217; text editors modify trailing space (IMHO, the proper fix for this is a new text editor&#8230;)</li>
</ul>

<p>Nicolas submitted a patch that enables a new option that interprets &#8220;\&#8221; before a newline as a marker that a line break should be used:</p>

<pre><code>This is a line.\
This is a new line.
</code></pre>

<p>To enable this feature, use the following option:</p>

<pre><code>multimarkdown --escaped-line-breaks file.txt
</code></pre>

<p>If this option is not enabled, then the default behavior will be to treat the newline as an escaped character, which results in it simply appearing as a newline character in the output. This means that the default behavior is the same as if the &#8220;\&#8221; is not in the source file.</p>

<div class="footnotes">
<hr />
<ol>

<li id="fn:1">
<p>Here is the text of the footnote itself. <a href="#fnref:1" title="return to article" class="reversefootnote">&#160;&#8617;</a></p>
</li>

</ol>
</div>


</body>
</html>
